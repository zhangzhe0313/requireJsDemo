!function(e,t){"function"==typeof define&&(define.amd||define.cmd)?define(t):t()}(0,function(){var e=document,t=window;if(t.Keyboard)return t.Keyboard;var n=navigator.userAgent,i="windows";/Mac\sOS\sX/i.test(n)&&(i="mac");var r="chrome";"undefined"!=typeof e.mozFullScreen?r="moz":"undefined"==typeof e.msHidden&&"undefined"!=typeof e.hidden||(r="ie");var a={windows:"moz"==r?{ctrlKey:!1,altKey:!0,shiftKey:!0}:{ctrlKey:!1,altKey:!0,shiftKey:!1},mac:{ctrlKey:!0,altKey:!0,shiftKey:!1}}[i],o=function(e,t){if(!e)return"";t=t||"x";var n,i="",r=0;for(r;r<e.length;r+=1)e.charCodeAt(r)>=55296&&e.charCodeAt(r)<=56319?(n=(65536+1024*(Number(e.charCodeAt(r))-55296)+Number(e.charCodeAt(r+1))-56320).toString(16),r+=1):n=e.charCodeAt(r).toString(16),i+=t+n;return i.substr(t.length)},l=null,c=function(t){if(!e.hasTipsShow){var n=e.documentElement.scrollTop||e.body.scrollTop,i=e.documentElement.scrollLeft||e.body.scrollLeft;t.forEach(function(t){if(t.clientHeight*t.clientWidth!=0){var r=t.getAttribute("accesskey"),o=[];for(var l in a)a[l]&&o.push(l);o.push(r);var c=t.getBoundingClientRect(),s=e.createElement("div");s.className="ui-kbd-tips AK_Tips",s.setAttribute("style","top:"+(c.top+n)+"px;left:"+(c.left+i)+"px;"),s.innerHTML=o.map(function(e){return"<kbd>"+e.replace("Key","")+"</kbd>"}).join("+"),e.body.appendChild(s),s.fromTarget=t}}),e.hasTipsShow=!0,l=setTimeout(function(){s()},3e3)}},s=function(){clearTimeout(l);var t=e.querySelectorAll(".AK_Tips");[].slice.call(t).forEach(function(t){t.fromTarget&&(t.fromTarget.hasTipsShow=null),e.body.removeChild(t)}),e.hasTipsShow=null};if(e.addEventListener&&(e.addEventListener("keydown",function(t){var n=!1,i=t.target||e.activeElement,l=i.tagName.toLowerCase();("textarea"==l||"input"==l&&0==/checkbox|radio|select|file|button|image|hidden/i.test(i.type))&&(n=!0);var u=e.querySelectorAll("a[accesskey],area[accesskey],button[accesskey],input[accesskey],label[accesskey],legend[accesskey],textarea[accesskey]");if(0!=u.length){var d=[].slice.call(u),f=-1;if(d.map(function(e){return e.getAttribute("accesskey")}).forEach(function(e,n){if(t.key&&t.key==e||t.keyIdentifier&&parseInt(t.keyIdentifier.toLowerCase().replace("u+",""),16)==parseInt(o(e),16))return f=n,!1}),0==t.altKey&&0==t.shiftKey&&0==t.ctrlKey){if(n)return;d[f]&&(d[f].focus(),t.preventDefault())}else 0==t.altKey&&1==t.shiftKey&&0==t.ctrlKey?191!=t.keyCode||n||(e.hasTipsShow?s():c(d)):t.altKey==a.altKey&&t.shiftKey==a.shiftKey&&t.ctrlKey==a.ctrlKey&&(-1==f?(t.preventDefault(),e.hasTipsShow?s():c(d)):s(),"ie"==r&&d[f]&&!n&&d[f].click())}}),e.addEventListener("mousedown",function(){s()})),e.addEventListener){var u={37:"left",38:"up",39:"right",40:"down",13:"enter",9:"tab",27:"esc"},d={add:function(e){e.className=e.className+" ui-outline"},remove:function(e){e.className=e.className.split(/\s+/).filter(function(e){if("ui-outline"!=e)return e}).join(" ")},removeAll:function(){[].slice.call(e.querySelectorAll(".ui-outline")).forEach(function(e){d.remove(e)})},has:function(e){return!(!e.className||!e.className.split)&&e.className.split(/\s+/).filter(function(e){if("ui-outline"==e)return e}).length>0}};t.isKeyEvent=!1,e.addEventListener("keydown",function(n){t.isKeyEvent=!0,setTimeout(function(){t.isKeyEvent=!1},100);var i=u[n.keyCode];if(i){var r=e.activeElement;if(r&&!/body/i.test(r.tagName)){if(/^radio|checkbox$/i.test(r.type)&&"enter"==i)return r.click(),void n.preventDefault();var a=null,o=e.querySelectorAll(".ESC");"esc"==i&&o.length&&[].slice.call(o).forEach(function(t){var n=t.id;(a=n&&e.querySelector('a[data-target="'+n+'"],input[data-target="'+n+'"]'))&&"none"!==t.style.display&&t.clientHeight>0&&a.click()});var l=r.getAttribute("data-focus"),c=r.getAttribute("data-target"),s=null;if((l||c)&&(l?s=e.getElementById(l):c&&(s=e.getElementById(c)),s&&(0!=s.clientWidth||0!=s.clientHeight)))if("tab"!=i){if("enter"==i){var f=s.querySelector(".ui-outline");if(f&&l)return n.preventDefault(),void f.click();if(c)return}if("esc"==i)return a=e.querySelector('a[data-target="'+c+'"],input[data-target="'+c+'"]'),void(l?r.blur():a&&0==/ESC/.test(a.className)&&a.click());var y=[].slice.call(s.querySelectorAll("a[href], button:not(:disabled), input:not(:disabled)")),v=-1;0!=y.length&&(y.forEach(function(e,t){l?d.has(e)&&(v=t):r==e&&(v=t),d.remove(e)}),n.preventDefault(),"left"==i||"up"==i?--v<0&&(v=-1):"right"!=i&&"down"!=i||++v>y.length-1&&(v=y.length),y[v]&&(l?d.add(y[v]):y[v].focus()))}else{d.removeAll();var h=s.querySelector("a[href], button:not(:disabled), input:not(:disabled)");h&&(h.focus(),n.preventDefault())}}}}),e.addEventListener("mousedown",function(e){var t=e.target;t&&!d.has(t)&&d.removeAll()}),e.addEventListener("click",function(n){var i=n.target,r=e.activeElement,a=i.getAttribute("tabindex")||"-1";i&&i==r&&(/^radio|checkbox$/i.test(r.type)||a>=0)&&0==t.isKeyEvent&&r.blur()}),e.addEventListener("focusin",function(e){var n=e.target;n&&(/^javascript/.test(n.href)&&!n.getAttribute("role")?n.setAttribute("role","button"):"button"!=n.type&&"submit"!=n.type||t.isKeyEvent&&d.add(n))}),e.addEventListener("focusout",function(e){var t=e.target;t&&("button"!=t.type&&"submit"!=t.type||d.remove(t))})}t.Keyboard={ua:n,browser:r,keycode:u,keyPrefix:a}});